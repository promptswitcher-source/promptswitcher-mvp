<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PromptSwitcher MVP</title>
    <style>
  
   :root {
  --bg-main: #0f1115;
  --bg-panel: #161922;
  --bg-input: #1a1d24;

  --text-main: #f2f2f2;     /* main readable text */
  --text-secondary: #cfd3da; /* labels */
  --text-muted: #9aa0aa;    /* hints / status */

  --border-color: #2a2d36;
}
 
  body {
    font-family: Arial, sans-serif;
    margin: 32px;
    max-width: 980px;

    background-color: #0f1115;
    color: #e6e6e6;
  }

  textarea {
    width: 100%;
    padding: 10px;
    font-size: 16px;

    background-color: #1a1d24;
    color: #e6e6e6;
    border: 1px solid #333;
  }

  h1, h2 {
    color: #ffffff;
  }

  .label {
    font-weight: bold;
    color: #cfcfcf;
  }

  .box {
    border: 1px solid #2a2d36;
    padding: 12px;
    margin: 10px 0;
    white-space: pre-wrap;

    background: #161922;
    color: #e6e6e6;
  }

  .row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 18px;
  }

  /* Buttons & links */
  .btn,
  button,
  a {
    display: inline-block;
    padding: 8px 12px;
    font-size: 14px;

    background: #1f2430;
    color: #e6e6e6;
    border: 1px solid #333;
    border-radius: 6px;
    cursor: pointer;
    text-decoration: none;
  }

  button:hover,
  a:hover {
    background: #2a3040;
  }

  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .topbar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 14px;
  }

  .small {
    color: #9aa0aa;
    font-size: 13px;
    min-height: 16px;
  }
  /* Gentle pulsing placeholder */
@keyframes placeholderPulse {
  0%   { opacity: 0.35; }
  50%  { opacity: 0.95; }
  100% { opacity: 0.35; }
}

textarea::placeholder {
  color: var(--text-secondary);
  animation: placeholderPulse 1.2s ease-in-out infinite;
}

</style>




  </head>
  <body>
    <h1>PromptSwitcher MVP</h1>

    <div class="topbar">
      <button id="btn">Generate</button>
      <div class="small" id="status"></div>
    </div>

    <div class="label">Your idea (any language):</div>
    <textarea id="idea" rows="4" placeholder="Type your idea..."></textarea>

    <h2>Results</h2>

    <div class="row">
      <div class="label">Clean English:</div>
      <div class="actions">
        <button onclick="copyFrom('english')">Copy</button>
      </div>
    </div>
    <div id="english" class="box">(nothing yet)</div>

    <div class="row">
      <div class="label">Midjourney:</div>
      <div class="actions">
        <button onclick="copyFrom('midjourney')">Copy</button>
        <a href="https://www.midjourney.com" target="_blank" rel="noopener noreferrer">Open Midjourney</a>
      </div>
    </div>
    <div id="midjourney" class="box">(nothing yet)</div>

    <div class="row">
      <div class="label">Leonardo:</div>
      <div class="actions">
        <button onclick="copyFrom('leonardo')">Copy</button>
        <a href="https://leonardo.ai" target="_blank" rel="noopener noreferrer">Open Leonardo</a>
      </div>
    </div>
    <div id="leonardo" class="box">(nothing yet)</div>

    <div class="row">
      <div class="label">DALL·E:</div>
      <div class="actions">
        <button onclick="copyFrom('dalle')">Copy</button>
        <a href="https://chatgpt.com" target="_blank" rel="noopener noreferrer">Open DALL·E</a>
      </div>
    </div>
    <div id="dalle" class="box">(nothing yet)</div>

    <div class="row">
      <div class="label">Ideogram:</div>
      <div class="actions">
        <button onclick="copyFrom('ideogram')">Copy</button>
        <a href="https://ideogram.ai" target="_blank" rel="noopener noreferrer">Open Ideogram</a>
      </div>
    </div>
    <div id="ideogram" class="box">(nothing yet)</div>

    <div class="row">
      <div class="label">Firefly:</div>
      <div class="actions">
        <button onclick="copyFrom('firefly')">Copy</button>
        <a href="https://firefly.adobe.com" target="_blank" rel="noopener noreferrer">Open Firefly</a>
      </div>
    </div>
    <div id="firefly" class="box">(nothing yet)</div>

    <script>
      const btn = document.getElementById("btn");
      const ideaEl = document.getElementById("idea");
      const statusEl = document.getElementById("status");
function setLoading(isLoading) {
  btn.disabled = isLoading;

  if (!btn.dataset.originalText) {
    btn.dataset.originalText = btn.textContent;
  }

  btn.textContent = isLoading ? "Working…" : btn.dataset.originalText;
  statusEl.textContent = isLoading ? "Generating…" : "";
}

      const englishEl = document.getElementById("english");
      const mjEl = document.getElementById("midjourney");
      const leoEl = document.getElementById("leonardo");
      const dalleEl = document.getElementById("dalle");
      const ideoEl = document.getElementById("ideogram");
      const ffEl = document.getElementById("firefly");

      function setAll(text) {
        englishEl.textContent = text;
        mjEl.textContent = text;
        leoEl.textContent = text;
        dalleEl.textContent = text;
        ideoEl.textContent = text;
        ffEl.textContent = text;
      }

      async function copyFrom(id) {
        const el = document.getElementById(id);
        const text = (el?.textContent || "").trim();
        if (!text || text === "(nothing yet)") {
          alert("Nothing to copy yet.");
          return;
        }
        try {
          await navigator.clipboard.writeText(text);
          statusEl.textContent = "Copied ✅";
          setTimeout(() => (statusEl.textContent = ""), 1200);
        } catch (e) {
          alert("Copy failed. Try selecting the text and copying manually.");
        }
      }
      window.copyFrom = copyFrom;

      btn.addEventListener("click", async () => {
        const idea = ideaEl.value.trim();
        if (!idea) {
          alert("Type an idea first.");
          return;
        }

       setLoading(true);
setAll("Working...");
 

        try {
          const res = await fetch("/generate", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ idea })
          });

          const data = await res.json();

          if (!res.ok) {
            englishEl.textContent = data.error || "Server error";
            statusEl.textContent = "Error";
            return;
          }

          englishEl.textContent = data.english || "";
          mjEl.textContent = data.midjourney || "";
          leoEl.textContent = data.leonardo || "";
          dalleEl.textContent = data.dalle || "";
          ideoEl.textContent = data.ideogram || "";
          ffEl.textContent = data.firefly || "";
          statusEl.textContent = "Done ✅";
          setTimeout(() => (statusEl.textContent = ""), 1200);

        } catch (e) {
          englishEl.textContent = "Network error. Check terminal.";
          statusEl.textContent = "Network error";
        } finally {
  setLoading(false);
}

      });
    </script>
  </body>
</html>
